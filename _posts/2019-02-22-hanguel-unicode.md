---
layout: post
title:  "한글 Unicode 값 계산"
date:   2019-02-22 01:23:00 +0900
categories: [algorithm]
tags: [Unicode, 한글]
---


## 한글 문자 조립

한글의 자음 Unicode 값은 `ㄱ`의 12593이라는 값으로 시작하여 `ㅎ`의 12622로 끝나고 모음 Unicode 값은
 `ㅏ`가 `ㅎ`을 이어 12623의 값으로 시작하여 `ㅣ`의 12643 값으로 끝난다. 그럼 한글의 Unicode 값은
 이것으로 끝일까?

한글은 알파벳과 달리 글자 수가 자음, 모음이 한 글자가 되는 것이 아니라 초성, 중성, 종성의 세 자리에 자리마다
다른 자음과 모음을 배치해 다양한 글자를 만들어 낼 수 있다.
이렇게 많은 한글의 글자를 Unicode 값으로 표현하기 위해 `0xac00`이라는 값에 한글의 초성, 중성,
종성에 온 각각의 자 모음 순서를 임의의 값을 곱해 표현하고 있다.

| 순서 | 0  | 1 | 2  | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 |
|-----|----|---|----|---|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|--|
| 초성 | ㄱ  | ㄲ | ㄴ | ㄷ | ㄸ | ㄹ | ㅁ | ㅂ | ㅃ | ㅅ | ㅆ | ㅇ | ㅈ | ㅉ | ㅊ | ㅋ | ㅌ | ㅍ | ㅎ |
| 중성 | ㅏ  | ㅐ | ㅑ | ㅒ | ㅓ | ㅔ | ㅕ | ㅖ | ㅗ | ㅘ | ㅙ | ㅚ | ㅛ | ㅜ | ㅝ | ㅞ | ㅟ | ㅠ | ㅡ | ㅢ | ㅣ |
| 종성 | 공백 | ㄱ | ㄲ | ㄳ | ㄴ | ㄵ | ㄶ | ㄷ | ㄹ | ㄺ | ㄻ | ㄼ | ㄽ | ㄾ | ㄿ | ㅀ | ㅁ | ㅂ | ㅄ | ㅅ | ㅆ | ㅇ | ㅈ | ㅊ | ㅋ | ㅌ | ㅍ | ㅎ |

초성의 경우 19개의 자음이 올 수 있고, 중성은 21개의 모음, 종성에는 공백을 포함하여 28개의 값이 올 수 있다.
이를 통해 만들어낼 수 있는 한글 글자의 수는 총 11,172 개이다.

이렇게 많은 값을 글자의 순서를 유지하면서 간단하게 표현하기 위해 간단한 방법을 사용하였다. 우리가 기본적으로
`가나다` 순으로 어떤 글자가 더 먼저인지 초성 -> 중성 -> 종성의 순서로 비교한다. Unicode 값도 이 순서를
 유지하기 위하여 초성의 index와 중성과 종성으로 만들어지는 경우의 수인 `21 x 28`의 값을 곱한 값, 중성의
  index와 종성의 경우의 수인 `28`을 곱한 값, 종성의 index를 더한 값을 이용한다. 여기에 한글의 Unicode
  값의 시작인 `0xac00`을 더하면 한글 글자를 만들 수 있다.

> 한글 글자 := 0xac00 + 21 x 28 x (초성 index) + 28 x (중성 index) + (종성 index)
>
> 한글 글자 := 0xac00 + 28 x ( 21 x (초성 index)  + 중성 index ) + 종성 index
>
> 아래와 같이 28로 묶어 쓸 수도 있음

## 한글 글자 분리

만약, 이미 완성된 한글 글자의 초성, 중성, 종성의 값을 얻고 싶을 때는 어떻게 해야할까?
위의 식을 역으로 풀어나가면 된다. 아래의 식을 보면 `0xac00`을 글자에서 뺀 후 28로 mod 연산을 했을 때에
종성의 index를 구할수 있다.

> 종성 index := (한글 글자 - 0xac00) % 28

중성 index는 마찬가지로 `0xac00`을 뺀 후 28로 정수 나누기 연산을 한다면 종성의 index 값은 28보다 작기
때문에 사라지고 `( 21 x (초성 index)  + 중성 index )`만이 남게 된다. 종성의 index를 구하던 것과
마찬가지로 21로 mod연산을 하면 중성의 index를 구할 수 있다.

> 중성 index := (한글글자 - 0xac00) // 28 % 21
>
> `//`는 정수 나누기 연산을 의미한다.

초성은 중성과 비슷하다. 정수 나누기 연산을 하면 그보다 작은 값은 나눠져 사라지는 것을 이용하여 `0xac00`을 뺀
값에 28과 21로 정수 나누기 연산을 하면 초성의 index를 구할 수 있다.

> 초성 index := (한글 글자 - 0xac00) // 28 // 21
>
> 초성 index := (한글 글자 - 0xac00) // 588
>
> 미리 계산한 값으로 나누어도 된다.

이와 같은 방법으로 한글의 글자를 조립하여 만들 수도 있고 혹은 이미 완성된 글자를 초성, 중성, 종성의 index를
 계산하여 어떤 자음, 모음인지 얻어낼 수도 있다. 만약 한글을 처리할 일이 있다면 라이브러리를 찾는 것보다
 한글을 처리하는 함수를 작성하여 적용시켜보자.

> Written with [StackEdit](https://stackedit.io/).
